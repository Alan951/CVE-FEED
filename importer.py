import csv

class Importer:

    def loadCves(self, file, fieldName = "CVE"):
        cves = []

        with open(file, newline="") as csvfile:
            reader = csv.reader(csvfile)
            rowArray = []
            for row in reader:
                rowArray.append(row)

            if(rowArray == [] or len(rowArray) == 0):
                print('No se han encontrado datos en el CSV')
                exit(-1)

            firstRow = rowArray[0]
            colCVE = self._identifyColumn(firstRow)

            for rows in rowArray[1:]:
                cves.append(rows[colCVE])
                
        return cves
            

    def _identifyColumn(self, firstRow, fieldName = "CVE"):
        for index, col in enumerate(firstRow):
            if(col == fieldName):
                return index
        else:
            print("Columna CVE no encontrado en el archivo")
            exit(-1)
        


if __name__ == '__main__':
    importer = Importer()
    importer.loadCves('test.csv')